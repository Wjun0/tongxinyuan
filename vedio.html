<!DOCTYPE html>
<html>
<body>
<video id="video" controls></video>

<script>
  if ('MediaSource' in window) {
    // 创建一个MediaSource对象
    var mediaSource = new MediaSource();
    var video = document.getElementById('video');

    // 将视频元素绑定到MediaSource
    video.src = URL.createObjectURL(mediaSource);
    mediaSource.addEventListener('sourceopen', sourceOpen);

    function sourceOpen(e) {
      var mime = 'video/webm; codecs="vorbis,vp8"';
      var sourceBuffer = mediaSource.addSourceBuffer(mime);
      fetch('http://127.0.0.1:8081/user/download/11/') // 视频文件的URL
        .then(response => response.arrayBuffer())
        .then(buffer => {
          // 这里你可以根据需要计算range
          sourceBuffer.appendBuffer(buffer);
          mediaSource.endOfStream(); // 数据已经添加完毕，结束流
        });
    }
  } else {
    console.error('MediaSource Extensions not supported!');
  }
</script>

</body>
</html>